# ChangeLog

**2024.03.25 - v2.3.35**

> 添加了下载时的进度提示。

**2024.03.23 - v2.3.34**

> 接受了来自 @wjsoj 的 PR，并对之进行更改，现在已经可以在课程页面中直接下载 mp4 格式的录播了。

**2024.03.07 - v2.3.33**

> 参照 https://leohlee.github.io/pkuVideo.html 的代码，修改了录播下载页面的代码，使得可以直接下载 mp4 格式的录播。
>
> 修正了 `main.css` 和 `arco-palette.css` 注入时机匹配失败的问题。

**2024.02.24 - v2.3.32**

> 修复了回放页面 URL 变动的问题。

**2023.12.02 - v2.3.31**

> 修改了 `replaceIcon()` 的选择范围。

**2023.11.28 - v2.3.30**

> 添加了作者信息，移除了无效引用，更新了 CDN Header。

**2023.11.15 - v2.3.29**

> 增加了对于单独文件附件的 CSS 样式的动画。

**2023.11.15 - v2.3.28**

> 优化了替换 ICON 的逻辑。

**2023.11.15 - v2.3.27**

> 修改了上一个版本中选择范围的错误，略微优化了一下样式。

**2023.11.15 - v2.3.26**

> 增加了对于单独文件附件的 CSS 样式。

**2023.10.28 - v2.3.25**

> 修复了全局导航栏判定过宽影响退出的问题。

**2023.09.03 - v2.3.24**

> 修复了一些小的问题。

**2023.09.03 - v2.3.23**

> 改正了 `ReplaceIcon()` 的逻辑，使得对于附件页面也可以生效了。

**2023.09.03 - v2.3.22**

> 修改了 README 的病句。

**2023.06.05 - v2.3.21**

> 将原有的 PKU_Logo 图片从 PNG 格式切换到了 SVG 格式，以提高图片质量，降低请求大小。

**2023.05.14 - v2.3.20**

> 修复了一个 `courseGlobalPage.css` 的宽度样式问题。

**2023.04.27 - v2.3.19**

> 添加了一些对于 courseBlankPage 的字体颜色样式的更改。
>
> 类似的，修复了一个 `courseAnnouncement.css` 的字体颜色样式更改的选择器问题。

**2023.04.08 - v2.3.18**

> 修复了 `deleteCourseSerial()` 函数对于某些课程无法正常工作的问题。closed #7

**2023.04.01 - v2.3.17**

> 修复了因为 `min-height:100vh` 带来的过高显示问题。
>
> 修复了文件上传区、通知说明区文本下划线选择范围过宽的问题。
>
> 修复了替换课程序号功能在某些情况下不可用的问题。

**2023.04.01 - v2.3.16**

> 意识到现在的 IIFE 写法有可能污染所有 pku.edu.cn 的网站。已增加限制作用域。
>
> 更正了一些打印格式。

**2023.04.01 - v2.3.15**

> 完蛋了 以后一定发布前先自己测试一下。
>
> 发现闪烁问题，已修复。

**2023.04.01 - v2.3.14**

> 草 忘了作用域问题了，修复一下。

**2023.04.01 - v2.3.13**

> 添加了 `deleteCourseSerial()` 函数，用于删除课程序号。
>
> 这意味着你不用修读这些课程了。
>
> 愚人节快乐！

**2023.03.31 - v2.3.12**

> 美化了通知、成绩界面的新项目。
>
> 美化了成绩上传页面的一些元素。
>
> 美化了滚动条。

**2023.03.31 - v2.3.11**

> 增加了 `replaceIcon()` 函数，用于替换标签页的图标。
>
> 修复了上传文件悬浮时样式失效的问题。

**2023.03.31 - v2.3.10**

> 更新了脚本的运行时间至 `document-start` ，解决了 JS 加载方式“卡一下”的问题。
>
> ↑ 2.3.9 版本的自动构建脚本没有同时更正，此版本修复了这个问题。

**2023.03.31 - v2.3.9**

> 更新了 `preventHideSidebar()` 的逻辑。
>
> 更新了脚本的运行时间至 `document-start` ，解决了 JS 加载方式“卡一下”的问题。

**2023.03.31 - v2.3.8**

> 所有 2.3.0~2.3.8 的日志和版本都可能是混乱的。
>
> 因为我使用了这些版本以测试自动化发布流程脚本。
>
> 从功能上来讲，这些版本是一致的，不必更新。

**2023.03.30 - v2.3.0**

> 经过分析，一直以来存在的侧边栏收起后（可能是窗口大小改变或者误触 puller）无法重新展开的问题无法简单地通过附加 CSS 样式解决，因此，我在 JavaScript 脚本种引入了新的 IIFE（立即调用表达式），即 `preventHideSidebar()` 函数，它会检测侧栏是否被收起，如果被收起，则在 **页面刷新** 后，帮你自动点击 puller 并展开侧栏。
>
> 上述原因导致 PKU Art 首次出现了 JavaScript 安装和 CSS 安装的差异，所以我建议所有采用 CSS 安装的用户 **改变安装方式** 至 JavaScript 安装。
>
> `custom-builder.py` 现在支持解析 `main.js` 中的 IIFE 表达式，并且自动添加到脚本后。

**2023.02.28 - v2.2.0**

> 修复了一些小的 bug。
>
> 通过更仔细的对比选择器修复了部分小的样式失效问题。
>
> 构建了完整的发布工作流程，并且迁移部署了 CDN 文件发放域名至 https://cdn.arthals.ink/ 下。稍后可能会完全禁用原有途径。

**2023.02.19 - v2.2.0 - dev**

> 状态：开发中，还未构建发布版 css/js。
>
> 简单的用 tampermonkey-vite-plugin 重构了一下，小修了几个明显的显示错误，现在可以直接在本地用 Vite HMR 了，不用手写自动刷新脚本了。
